package com.blackhammer.stereviewer {		import flash.display.*;	import flash.events.Event;	import flash.geom.*;	import flash.media.*;	import com.greensock.*;	import flash.media.*; 	import fl.motion.*;	import flash.net.URLRequest;		public class DoubleTextPage extends MovieClip{				private var _myDaddy:Object;		public var _textDisplayL:TextDisplay;		public var _textDisplayR:TextDisplay;		private var _Config:SV_Config;		private var _leftText:String;		private var _rightText:String;		//private var _pageImageList:Array = [];		private var _pageTextImage:Image_Manager;		//constants		private var _fieldW:Number;		private var _filedH:Number;		private var _margin:Number = 20;		public var _type:String = "doublePage";		private var _myID:uint;		private var _loadimage:Loader = new Loader();		private var _bSprite:Sprite = new Sprite();		public function DoubleTextPage(myDaddy:Object, leftText:String, rightText:String,myID:uint) {			// how about just use two textDisplays, L and R			_myDaddy = myDaddy;			_myID = myID;			_Config = SV_Config.getInstance();			_leftText = leftText;			_rightText = rightText;			_fieldW = SV_Config.DOUBLEFIELDWIDTH;			_filedH = SV_Config.DOUBLEFIELDHEIGHT;			drawRectangle(_bSprite,SV_Config.BGCOLOR,0,0,SV_Config.SCREENW,SV_Config.SCREENH);			addChild(_bSprite);						//TextDisplay(myDaddy:Object, fieldW:Number, fieldH:Number, margin:Number, centered:Boolean=false)			_textDisplayL = new TextDisplay(this, _fieldW, _filedH, _margin);			_textDisplayR = new TextDisplay(this, _fieldW, _filedH, _margin);			_textDisplayL.x = (SV_Config.SCREENW - 2*_fieldW)/3 + 5;			_textDisplayR.x = 2*_textDisplayL.x + _fieldW  -5;			_textDisplayL.y = _textDisplayR.y = 20;			addChild(_textDisplayL);			addChild(_textDisplayR);			_textDisplayL.mPlay(_leftText,SV_Config.FONTSIZE,0,false,false,false,0)			_textDisplayR.mPlay(_rightText,SV_Config.FONTSIZE,0,false,false,false,0)			_pageTextImage = new Image_Manager(this);			addChild(_pageTextImage);						//page numbers			var pageNumber:StaticTextField = new StaticTextField(this,100,30); //parent, fw,fh,margin			pageNumber.mPlay("page "+ String(_myID +1) + " of " + _myDaddy._numOfScreens,12,false,false);			pageNumber.x = 925;			pageNumber.y = 748;			addChild(pageNumber);						this.addEventListener(Event.ADDED_TO_STAGE, onTheStage, false, 0, true);		}				private function onTheStage(e:Event):void{			this.removeEventListener(Event.ADDED_TO_STAGE, onTheStage);			addChild(_pageTextImage);		}				public function loadImage(theImagePath:String):void{			/*var imageLoader:Loader = new Loader();			imageLoader.load(new URLRequest(theImagePath));			imageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,imageLoaded, false, 0 , true);*/			_loadimage.load(new URLRequest(theImagePath));			_loadimage.contentLoaderInfo.addEventListener(Event.COMPLETE,imageLoaded, false, 0 , true);		}				private function imageLoaded(e:Event):void{			/*trace(e.currentTarget);			trace(e.currentTarget.content.bitmapData);			var loadimageBMD:BitmapData = e.target.content.bitmapData;			var targetLoader:Loader = e.currentTarget.loader as Loader;			trace(targetLoader);			targetLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE,imageLoaded);*/						var loadimageBMD:BitmapData = _loadimage.content.bitmapData;			_loadimage.contentLoaderInfo.removeEventListener(Event.COMPLETE,imageLoaded);						var daX:Number = Number(_myDaddy._appMetaData.xmlData.PAGE[_myID].IMAGE.@imageX);			var daY:Number = Number(_myDaddy._appMetaData.xmlData.PAGE[_myID].IMAGE.@imageY);			var caption:String = _myDaddy._appMetaData.xmlData.PAGE[_myID].IMAGE.@caption;			//_pageImageList.push(new Image_Manager(this));			//addChild(_pageImageList[_pageImageList.length-1]);			//_pageImageList[_pageImageList.length-1].setNewImage(loadimageBMD, daX, daY);			//_pageImageList[_pageImageList.length-1].mShow();						_pageTextImage.setNewImage(loadimageBMD, daX, daY,caption,_fieldW -10);			_pageTextImage.mShow();					}		public function setColors(backColor:uint,fontColor:uint):void{			_textDisplayL.changeFontColor(fontColor);			_textDisplayR.changeFontColor(fontColor);			drawRectangle(_bSprite,SV_Config.BGCOLOR,0,0,SV_Config.SCREENW,SV_Config.SCREENH);		}		private function drawRectangle(sprite:Sprite,color:uint,daX:Number,daY:Number,dW:Number,dH:Number):void{			var g:Graphics = sprite.graphics;			g.clear();			g.beginFill(color,1);			g.drawRect(daX,daY,dW,dH);			g.endFill();		}		public function revertTextFromXML(daThing:TextDisplay):void{			if (_textDisplayL == daThing) {				trace("_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.LEFT",_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.LEFT);				daThing.updateText(_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.LEFT);			}else{				trace("_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.RIGHT",_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.RIGHT);				daThing.updateText(_myDaddy._appMetaData.xmlData.PAGE[_myID].NOTES.RIGHT);			}			//_myDaddy.revertTextFromXML();		}		public function revertTextFromFile(daThing:TextDisplay):void{			var leftRight:String = (_textDisplayL == daThing) ? "LEFT": "RIGHT";			trace("leftRight",leftRight);			_myDaddy.revertTextFromFile(leftRight);		}		public function saveXMLlocal(daThing:TextDisplay,daText:String):void{			var leftRight:String = (_textDisplayL == daThing) ? "LEFT": "RIGHT";			 trace("leftRight",leftRight);			_myDaddy.saveXMLlocal(daText,leftRight);		}		public function saveXMLtoFile(daThing:TextDisplay,daText:String):void{			var leftRight:String = (_textDisplayL == daThing) ? "LEFT": "RIGHT";			trace("leftRight",leftRight);			_myDaddy.saveXMLtoFile(daText,leftRight);		}		public function saveImageCoords(daX:Number,daY:Number):void{			_myDaddy.saveImageCoords(daX,daY);		}				public function showDone(daThing:Object):void{				//_myDaddy.MessageDone(_messageID);				_myDaddy.showDone(this);		}		public function hideDone(daThing:Object):void{				_myDaddy.hideDone(this);		}		public function hideText():void{			_textDisplayL.hideText();			_textDisplayR.hideText();		}		public function mHide():void{			_textDisplayL.mHide();			_textDisplayR.mHide();		}		public function kill():void{			_textDisplayL.kill();			_textDisplayR.kill();		}	}	}